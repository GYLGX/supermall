{"remainingRequest":"D:\\前端学习\\开发软件\\前端开发文件\\Vue\\实战项目\\supermall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\前端学习\\开发软件\\前端开发文件\\Vue\\实战项目\\supermall\\src\\views\\home\\Home.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\前端学习\\开发软件\\前端开发文件\\Vue\\实战项目\\supermall\\src\\views\\home\\Home.vue","mtime":1580982547173},{"path":"D:\\前端学习\\开发软件\\前端开发文件\\Vue\\实战项目\\supermall\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\前端学习\\开发软件\\前端开发文件\\Vue\\实战项目\\supermall\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\前端学习\\开发软件\\前端开发文件\\Vue\\实战项目\\supermall\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\前端学习\\开发软件\\前端开发文件\\Vue\\实战项目\\supermall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\前端学习\\开发软件\\前端开发文件\\Vue\\实战项目\\supermall\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5ob21lLW5hdiB7CiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItdGludCk7CiAgY29sb3I6ICNmZmY7Cn0KCi50YWItY29udHJvbDEgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB6LWluZGV4OiAxMDsKfQoKLmNvbnRlbnQgewogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6IDQ0cHg7CiAgbGVmdDogMHB4OwogIHJpZ2h0OiAwcHg7CiAgYm90dG9tOiA0OXB4OwogIG92ZXJmbG93OiBoaWRkZW47Cn0KCg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwLA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\r\n  <div class=\"Home\">\r\n    <!-- NarBar栏 -->\r\n    <nav-bar class=\"home-nav\">\r\n      <div slot='center'>特惠街</div>\r\n    </nav-bar>\r\n\r\n    <!-- 文字分类栏 -->\r\n    <tab-control class=\"tab-control1\" :titles=\"['流行','型款','精选']\" @tabclick='tabclick' v-show='tabControlShow'\r\n      ref='tabControl1'>\r\n    </tab-control>\r\n    <!-- 滚动插件 -->\r\n    <scroll class=\"content\" ref='scroll' :probe-type=3 @scroll='onscrollTop' :pull-up-load='true'\r\n      @pullingUp='pullingUp'>\r\n      <!-- 轮播图 -->\r\n      <home-swiper :banners='banners' @swiperImageLoad='swiperImageLoad'></home-swiper>\r\n      <!-- 图片分类栏 -->\r\n      <recommend-view :recommends='recommends'></recommend-view>\r\n      <!-- 图片链接 -->\r\n      <feature-view></feature-view>\r\n      <!-- 文字分类栏 -->\r\n      <tab-control class=\"tab-control2\" :titles=\"['流行','型款','精选']\" @tabclick='tabclick' ref='tabControl2'>\r\n      </tab-control>\r\n      <!-- 分类下的商品 -->\r\n      <goods-list :goods=\"showGoods\"></goods-list>\r\n    </scroll>\r\n    <back-top @click.native='backClick' v-show='scrollTop' />\r\n  </div>\r\n</template>\r\n<script>\r\n  import {\r\n    itemListenerMixin,\r\n    scrollTopMixin\r\n  } from 'common/mixin'\r\n\r\n  import NavBar from 'components/common/navbar/NavBar'\r\n  import Scroll from 'components/common/scroll/Scroll'\r\n\r\n  import TabControl from 'components/content/tabcontrol/TabControl'\r\n  import GoodsList from 'components/content/goods/GoodsList'\r\n\r\n  import HomeSwiper from './childComps/HomeSwiper'\r\n  import RecommendView from './childComps/RecommendView'\r\n  import FeatureView from './childComps/FeatureView'\r\n\r\n  //网络请求方法\r\n  import {\r\n    getHomeMultidata,\r\n    getHomeGoodsdata\r\n  } from 'network/home'\r\n\r\n\r\n  export default {\r\n    name: 'Home',\r\n    data() {\r\n      return {\r\n        banners: [],\r\n        recommends: [],\r\n        goods: {\r\n          'pop': {\r\n            page: 0,\r\n            list: []\r\n          },\r\n          'new': {\r\n            page: 0,\r\n            list: []\r\n          },\r\n          'sell': {\r\n            page: 0,\r\n            list: []\r\n          }\r\n        },\r\n        currenType: 'new',\r\n        tabControlShow: false,\r\n        SwiperOffsetTop: 0,\r\n        scrollY: 0\r\n      }\r\n    },\r\n    mixins: [itemListenerMixin, scrollTopMixin],\r\n    components: {\r\n      NavBar,\r\n      Scroll,\r\n      TabControl,\r\n      GoodsList,\r\n\r\n      HomeSwiper,\r\n      RecommendView,\r\n      FeatureView\r\n    },\r\n    computed: {\r\n      showGoods() {\r\n        return this.goods[this.currenType].list\r\n      }\r\n    },\r\n    //vue创建出来来时时调用的生命周期函数\r\n    created() {\r\n      //调用获取轮播图和分类图的方法\r\n      this.getHomeMultidata()\r\n\r\n      //调用获取分类里面的数据的方法\r\n      this.getHomeGoodsdata('pop')\r\n      this.getHomeGoodsdata('new')\r\n      this.getHomeGoodsdata('sell')\r\n\r\n    },\r\n    //当template挂载到dom上会回调的\r\n    mounted() {},\r\n    //当前主键处于活跃时调用\r\n    activated() {\r\n      //回到指定位置\r\n      this.$refs.scroll.backtop(0, this.scrollY);\r\n      //刷新\r\n      this.$refs.scroll.refresh();\r\n    },\r\n    //当前组件离开时调用\r\n    deactivated() {\r\n      // 记录离开时的位置\r\n      this.scrollY = this.$refs.scroll.scrollY()\r\n      //删除$bus里面的方法\r\n      this.$bus.$off('itemImageLoad', this.listImageLoad)\r\n    },\r\n    methods: {\r\n      /*\r\n       *事件监听\r\n       */\r\n      //分类tab的切换\r\n      tabclick(index) {\r\n        switch (index) {\r\n          case 0:\r\n            this.currenType = 'pop'\r\n            break\r\n          case 1:\r\n            this.currenType = 'new'\r\n            break\r\n          case 2:\r\n            this.currenType = 'sell'\r\n            break\r\n        }\r\n        this.$refs.tabControl1.currentIndex = index;\r\n        this.$refs.tabControl2.currentIndex = index;\r\n        this.$refs.scroll.backtop(0, -this.SwiperOffsetTop, 0)\r\n      },\r\n\r\n      //scroll滚动时的事件监听\r\n      onscrollTop(position) {\r\n        //到指定位置显示置顶图标\r\n        this.showTop(position)\r\n        //tabControl吸顶\r\n        this.tabControlShow = -position.y > this.SwiperOffsetTop\r\n\r\n      },\r\n      //上拉加载数据\r\n      pullingUp() {\r\n        this.getHomeGoodsdata(this.currenType)\r\n        this.$refs.scroll.finishPullUp()\r\n      },\r\n      //等轮播图加载出来后，就计算tab-contro 的位置高度\r\n      swiperImageLoad() {\r\n        this.SwiperOffsetTop = this.$refs.tabControl2.$el.offsetTop\r\n      },\r\n\r\n      /*\r\n       *啊网络请求\r\n       */\r\n      //获取轮播图和分类图的方法\r\n      getHomeMultidata() {\r\n        getHomeMultidata().then(res => {\r\n          this.banners = res.data.banner.list;\r\n          this.recommends = res.data.recommend.list;\r\n        })\r\n      },\r\n      //获取分类里面的数据的方法\r\n      getHomeGoodsdata(type) {\r\n        const page = this.goods[type].page + 1\r\n        getHomeGoodsdata(type, page).then(res => {\r\n          this.goods[type].list.push(...res.data.list)\r\n        })\r\n        // console.log(this.$refs);\r\n      }\r\n    },\r\n  }\r\n\r\n</script>\r\n<style>\r\n  .home-nav {\r\n    background-color: var(--color-tint);\r\n    color: #fff;\r\n  }\r\n\r\n  .tab-control1 {\r\n    position: relative;\r\n    z-index: 10;\r\n  }\r\n\r\n  .content {\r\n    position: fixed;\r\n    top: 44px;\r\n    left: 0px;\r\n    right: 0px;\r\n    bottom: 49px;\r\n    overflow: hidden;\r\n  }\r\n\r\n</style>\r\n"]}]}